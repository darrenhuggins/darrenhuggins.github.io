<meta name="viewport" content="width=device-width, initial-scale=1.0, , shrink-to-fit=no" />
<link rel="stylesheet" type="text/css" href="tswnavbar.css" />

<div id="tswcssbuttons">
<ul>
<li><a href="">Slurpee</a></li>
<li><a href="">Cash Register</a></li>
<li><a href="">Pinpad / Card Issue</a></li>
<li><a href="">Gas Pump Down</a></li>
<li><a href="">Ice Machine Down</a></li>
<li><a href="">Water Leak</a></li>
<li><a href="">Coffee Issue</a></li>
<li><a href="">Other</a></li>
<button type="button" onclick="tsw_open_demo_window();">Open demo in a new window/tab</button>
<button type="button" onclick="loginErrExample();">Close current window if possible</button>
</ul>


</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
        function guid() {
          function s4() {
            return Math.floor((1 + Math.random()) * 0x10000)
              .toString(16)
              .substring(1);
          }
          return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
            s4() + '-' + s4() + s4() + s4();
        }
        function getParameterByName(name, url) {
          if (!url) url = window.location.href;
          name = name.replace(/[\[\]]/g, "\\$&");
          var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
              results = regex.exec(url);
          if (!results) return null;
          if (!results[2]) return '';
          return decodeURIComponent(results[2].replace(/\+/g, " "));
        }
       
        function loginErrExample() {
           
          var serviceKey = getParameterByName('service_key');
          if (!serviceKey) serviceKey = "25c7766eede1452ca427a2cd12a6d457"; /*ML service key*/
         
          var date = new Date();
          customerName = "dhuggins@pagerduty.com";
          dedupKey = customerName + date.getMinutes() + date.getSeconds();
        
          var orderValue = '0';
          
          var eventObject = '{ ' +
              ' "client_url": "https://rpm.newrelic.com/accounts/1818495/applications/105833762", ' +
              ' "service_key"\: "' + serviceKey + '", ' +
              ' "incident_key"\: "' + dedupKey + '", ' +
              ' "client"\: "New Relic", ' +
              ' "vendor"\: "New Relic", ' +
              ' "event_type"\: "trigger", ' +
              ' "contexts"\: [ ' +
              ' {  ' +
                  ' "src": "https://docs.newrelic.com/sites/default/files/styles/inline_660px/public/thumbnails/image/transactions-ui-alert.png?itok=LgLy0yee", ' +
                  ' "alt": "Snapshot of metric", ' +
                  ' "href": "https://s14.postimg.org/knuvhigz5/NRErrors2.png", ' +
                  ' "type": "image" ' +
              ' }, ' +

              ' { ' +
              ' "text": "Conference URL (Zoom)", ' +
              ' "href": "https://pagerduty.zoom.us/j/5080555253", ' +
              ' "type": "link" ' +
              ' }, ' +

            '{' +
            '  "text": "Conference Dial (Zoom)",  ' +
            '  "href": "tel:+442036950088,,5080555253#",  ' +
            '  "type": "link"  ' +
            '},' +
          '{' +
            ' "text": "Monitor Status", ' +
            ' "href": "https://appp.datadoghq.com/monitors#72563?to_ts=1452282540000&group=host%3Aprod-web-xdb09&from_ts=1452281340000", ' +
            ' "type": "link" ' +
          '},' +
          '{ ' +
          ' "text": "Triggered Monitors", ' +
          '  "href": "https://rpm.newrelic.com/accounts/1818495/applications/105833762", ' +
          '  "type": "link" ' +
          ' } ' +
          ' ], ' +
        ' "details": { ' +
          ' "body": "[Critical] Unexpected server response detected on the Live Core Service, High Error rates <br/> Object Reference Not Set and ADO.NET Connection pool exceeded errors detected" , ' +
          ' "Order Value": ' + orderValue + ', ' +
          ' "priority": "High", ' +
          ' "title": "[Critical] Unexpected server response detected on the Live Core Service, High Error rates", ' +
          ' "event_id": "8125363154448140714", ' +
          ' "tags": "aws-prod, base, env:prod, host:farnsworth, monitor, pd_az:us-west-2c, production, xdb, xtradb", ' +
          ' "Customer": "'+ customerName + '" ' +
          ' }, ' +
        ' "description": "[Critical] Live Core Service Failure: unexpected server response" ' +
        '}'
       
        console.log(eventObject)

       
          $.ajax({
            method: "POST",
            url: "https://events.pagerduty.com/generic/2010-04-15/create_event.json",
            data: eventObject, 
            success:function(resp){console.log(JSON.stringify(resp));}
          })
            .done(function( msg ) {
             
          });

          alert('Error connecting to Apollo Gaming Core Services.')
          return false;
        }
        </script>